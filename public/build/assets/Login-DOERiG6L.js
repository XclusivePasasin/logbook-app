import{u as C,a as x,b as I,c as S,r as p,d as B,e as o,w as n,f as t,n as E,g as L,o as V,h as m,i as j,j as K,k as N}from"./app-BcChn2R6.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={__name:"Login",setup(z){const v=L(),_=C(),w=x(),l=I(),h=S(()=>w.isDark),f=p(null),i=p(!1),a=p({email:"",password:""}),b={email:[{required:!0,message:"Ingresa tu correo electrónico",trigger:"blur"},{type:"email",message:"Correo electrónico inválido",trigger:"blur"}],password:[{required:!0,message:"Ingresa tu contraseña",trigger:"blur"}]};async function g(){var u,e,s;try{await((u=f.value)==null?void 0:u.validate()),i.value=!0,await _.login(a.value),l.success("Bienvenido de nuevo"),v.push({name:"dashboard"})}catch(r){(s=(e=r.response)==null?void 0:e.data)!=null&&s.errors?Object.values(r.response.data.errors).flat().forEach(c=>{l.error(c)}):r.message||l.error("Error al iniciar sesión")}finally{i.value=!1}}return(u,e)=>{const s=t("n-input"),r=t("n-form-item"),c=t("n-button"),k=t("n-form"),y=t("n-card");return V(),B("div",{class:E(["login-container",{dark:h.value}])},[o(y,{class:"login-card"},{default:n(()=>[e[3]||(e[3]=m("div",{class:"login-header"},[m("h2",null,"Logbook App"),m("p",null,"Inicia sesión para continuar")],-1)),o(k,{ref_key:"formRef",ref:f,model:a.value,rules:b,size:"large"},{default:n(()=>[o(r,{path:"email",label:"Correo Electrónico"},{default:n(()=>[o(s,{value:a.value.email,"onUpdate:value":e[0]||(e[0]=d=>a.value.email=d),placeholder:"correo@ejemplo.com"},null,8,["value"])]),_:1}),o(r,{path:"password",label:"Contraseña"},{default:n(()=>[o(s,{value:a.value.password,"onUpdate:value":e[1]||(e[1]=d=>a.value.password=d),type:"password","show-password-on":"click",placeholder:"********",onKeydown:j(K(g,["prevent"]),["enter"])},null,8,["value","onKeydown"])]),_:1}),o(c,{type:"primary",block:"",loading:i.value,onClick:g},{default:n(()=>[...e[2]||(e[2]=[N(" Iniciar Sesión ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})],2)}}},M=R(q,[["__scopeId","data-v-747e6610"]]);export{M as default};
