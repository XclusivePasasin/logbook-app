import{b as N,r as P,z as F,d as y,e as t,w as e,f as r,A as H,o as s,v as m,k as z,q as d,F as C,B as j,h as i,y as c}from"./app-BcChn2R6.js";import{u as $,b as D}from"./index-BNShoDAj.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as A,P as J}from"./PeopleOutline-7nMoSeJJ.js";const L={class:"dashboard"},S={style:{display:"flex","justify-content":"space-between","align-items":"center"}},q={style:{color:"#999","font-size":"12px"}},G={style:{"font-size":"18px","font-weight":"bold",color:"#18a058"}},R={style:{display:"flex","justify-content":"space-between","align-items":"center"}},K={__name:"Dashboard",setup(O){const T=N(),v=$(D).smaller("md"),o=P({total_trips:0,total_amount:0,total_passengers:0,by_payment_method:[],by_driver:[]});function V(a){return{E:"Efectivo",CH:"Cargo Hab.",TJ:"Tarjeta"}[a]||a}const w=[{title:"Método",key:"payment_method",render(a){return{E:"Efectivo",CH:"Cargo Hab.",TJ:"Tarjeta"}[a.payment_method]||a.payment_method}},{title:"Viajes",key:"count"},{title:"Total",key:"total",render(a){return`$${Number(a.total).toFixed(2)}`}}],B=[{title:"Conductor",key:"driver.name"},{title:"Viajes",key:"count"}];async function E(){try{const a=await H.get("/trips-report");o.value=a.data}catch(a){console.error(a),T.error("Error al cargar estadísticas")}}return F(()=>{E()}),(a,u)=>{const b=r("n-icon"),p=r("n-statistic"),n=r("n-card"),_=r("n-grid-item"),g=r("n-grid"),f=r("n-space"),h=r("n-data-table"),M=r("n-tag");return s(),y("div",L,[t(f,{vertical:"",size:"large"},{default:e(()=>[t(n,{title:"Resumen General"},{default:e(()=>[t(g,{cols:"1 s:2 m:4",responsive:"screen","x-gap":12,"y-gap":12},{default:e(()=>[t(_,null,{default:e(()=>[t(n,{size:"small"},{default:e(()=>[t(p,{label:"Total Viajes",value:o.value.total_trips},{prefix:e(()=>[t(b,null,{default:e(()=>[t(m(A))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(n,{size:"small"},{default:e(()=>[t(p,{label:"Monto Total",value:o.value.total_amount},{prefix:e(()=>[...u[0]||(u[0]=[z("$",-1)])]),_:1},8,["value"])]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(n,{size:"small"},{default:e(()=>[t(p,{label:"Pasajeros",value:o.value.total_passengers},{prefix:e(()=>[t(b,null,{default:e(()=>[t(m(J))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{cols:"1 m:2",responsive:"screen","x-gap":24,"y-gap":24},{default:e(()=>[t(_,null,{default:e(()=>[t(n,{title:"Viajes por Método de Pago"},{default:e(()=>[m(v)?(s(),d(f,{key:0,vertical:"",size:"small"},{default:e(()=>[(s(!0),y(C,null,j(o.value.by_payment_method,l=>(s(),d(n,{key:l.payment_method,size:"small"},{default:e(()=>[i("div",S,[i("div",null,[i("strong",null,c(V(l.payment_method)),1),i("div",q,c(l.count)+" viajes",1)]),i("div",G," $"+c(Number(l.total).toFixed(2)),1)])]),_:2},1024))),128))]),_:1})):(s(),d(h,{key:1,columns:w,data:o.value.by_payment_method,size:"small",bordered:!1},null,8,["data"]))]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(n,{title:"Top Conductores"},{default:e(()=>[m(v)?(s(),d(f,{key:0,vertical:"",size:"small"},{default:e(()=>[(s(!0),y(C,null,j(o.value.by_driver,l=>{var k;return s(),d(n,{key:(k=l.driver)==null?void 0:k.name,size:"small"},{default:e(()=>{var x;return[i("div",R,[i("div",null,[i("strong",null,c(((x=l.driver)==null?void 0:x.name)||"N/A"),1)]),t(M,{type:"info"},{default:e(()=>[z(c(l.count)+" viajes",1)]),_:2},1024)])]}),_:2},1024)}),128))]),_:1})):(s(),d(h,{key:1,columns:B,data:o.value.by_driver,size:"small",bordered:!1},null,8,["data"]))]),_:1})]),_:1})]),_:1})]),_:1})])}}},Z=I(K,[["__scopeId","data-v-2cd09077"]]);export{Z as default};
